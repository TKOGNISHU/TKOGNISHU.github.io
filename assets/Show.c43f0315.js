import{R as v}from"./RightPage.14e988d7.js";import{C}from"./Comment.f76872f1.js";import{_ as T,u as R,H as I,p as G,F as N,A as V,r as _,o as l,c as i,a as s,x as w,j as D,f as a,e as f,w as h,t,g as n,b as d,d as p,h as b,n as P}from"./index.4c92d78a.js";import{G as S}from"./group.service.d2bca808.js";const U={components:{RightPage:v,Comment:C},setup(){const r=R();return{getUser:()=>r.getUser,logIn:r.logIn}},data(){return{slug:this.$route.params.slug,film:{},parts:[],HTTP_GG_DRIVE:I}},methods:{showCondition:G,async retrieveData(){try{this.film=await N.get(this.slug),this.parts=await S.getFilms(this.film.group._id),this.film.episodes=this.film.episodes.reverse(),console.log(this.film,this.film.episodes),console.log(" Group: ",this.parts)}catch(r){console.log(r),alert("C\xF3 l\u1ED7i x\u1EA3y ra! Vui l\xF2ng t\u1EA3i l\u1EA1i trang!")}},async follow(){try{if(this.film)console.log("id: ",this.film._id,this.getUser()._id),await V.follow({id:this.film._id,userId:this.getUser()._id}),this.logIn();else{alert("C\xF3 l\u1ED7i!");return}}catch(r){console.log(r),alert("C\xF3 l\u1ED7i!")}}},created(){this.retrieveData()}},F={class:"container bg-dark text-light p-3"},B={class:"row"},E={class:"col-9"},H={class:"d-flex flex-column h-100 bg-dark bg-opacity-75"},z={class:"row h-75 overflow-hidden"},A={class:"col-3"},j=s("span",{class:"position-relative"},[s("i",{class:"fa-solid fa-flag"}),s("span",{class:"position-absolute top-25 start-50 translate-middle-x"},[s("i",{class:"fa-solid fa-plus text-dark"})])],-1),L=n(" Theo d\u1ED7i "),M=[j,L],Q=s("i",{class:"fa-solid fa-play fs-1 text-warning"},null,-1),q={class:"col-9 h-100 film-body"},J={class:"card-body h-100"},K={class:"card-title fs-1"},O={class:"card-title fs-3"},W={class:"card-text h-50 mt-5 px-3 py-2 fs-4 rounded overflow-auto",style:{background:"rgba(61, 61, 61, 0.8)"}},X={class:"fs-4"},Y=s("i",{class:"fa-solid fa-star text-warning"},null,-1),Z=s("i",{class:"fa-regular fa-clock text-secondary ms-3"},null,-1),$=s("i",{class:"fa-regular fa-calendar-days text-secondary ms-3"},null,-1),ss=s("i",{class:"fa-regular fa-eye text-secondary ms-3"},null,-1),es={key:0,class:"h-25 p-5"},ts={key:0,class:"me-2 fw-semibold"},os={class:"container mt-5"},ls=s("h3",{class:"my-3 fs-3 text-warning"},"Th\xF4ng tin phim",-1),is={class:"row row-cols-2 px-2 py-3 fs-4",style:{background:"#333"}},ns={class:"col"},rs=s("span",{class:"fw-semibold"},"Tr\u1EA1ng th\xE1i:",-1),cs=s("span",{class:"fw-semibold"},"Th\u1EC3 lo\u1EA1i:",-1),as={class:"d-inline-block m-2 text-warning"},ds=s("span",{class:"fw-semibold"},"Qu\u1ED1c gia:",-1),ms=n(),_s={class:"text-warning"},fs=s("span",{class:"fw-semibold"},"Nh\xE0 s\u1EA3n xu\u1EA5t:",-1),hs=n(),ps={class:"text-warning"},us={class:"col"},gs=s("span",{class:"fw-semibold me-2"},"Th\u1EDDi l\u01B0\u1EE3ng:",-1),ws=s("span",{class:"fw-semibold"},"Ch\xFA \xFD:",-1),bs={key:0},ys={key:1,class:"ms-2 px-2 py-1 bg-danger text-light rounded"},xs=s("span",{class:"fw-semibold"},"T\u1EADp m\u1EDBi:",-1),ks={class:"container mt-5"};function vs(r,u,Cs,g,e,c){const m=_("router-link"),y=_("Comment"),x=_("RightPage");return l(),i("div",F,[s("div",B,[s("article",E,[s("div",{class:"card film",style:w(`background-image: url(${e.HTTP_GG_DRIVE}${e.film.backgroundId});`)},[s("div",H,[s("div",z,[s("div",A,[s("div",{class:"img-fluid rounded-start h-100 d-flex flex-column film-image",style:w(`background-image: url(${e.HTTP_GG_DRIVE}${e.film.imageId});`)},[g.getUser().follows&&g.getUser().follows.some(o=>o==e.film._id)?a("",!0):(l(),i("a",{key:0,onClick:u[0]||(u[0]=D((...o)=>c.follow&&c.follow(...o),["prevent"])),class:"bg-dark bg-opacity-25 w-50 text-light text-decoration-none fs-4 p-2",href:""},M)),f(m,{class:"border border-2 border-light rounded-circle py-3 px-4 bg-dark bg-opacity-10 m-auto",to:e.film.episodes&&`/films/${e.film.slug}/${e.film.episodes[e.film.episodes.length-1]._id}`},{default:h(()=>[Q]),_:1},8,["to"])],4)]),s("div",q,[s("div",J,[s("h3",K,t(e.film.name),1),s("h3",O,t(e.film.otherName),1),s("p",W,t(e.film.description),1),s("p",X,[s("span",null,[Y,n(" "+t(e.film.rating),1)]),s("span",null,[Z,n(" "+t(e.film.time),1)]),s("span",null,[$,n(" "+t(e.film.year),1)]),s("span",null,[ss,n(" "+t(e.film.view)+" l\u01B0\u1EE3t xem ",1)])])])])]),e.parts.length>1?(l(),i("div",es,[(l(!0),i(d,null,p(e.parts,o=>(l(),b(m,{key:o._id,class:P(`d-inline-block px-2 py-1 border rounded me-4 text-light fw-semibold ${c.showCondition(o.part,e.film.part,"bg-warning text-dark")}`),to:"/films/"+o.slug},{default:h(()=>[Number.isFinite(Number.parseInt(o.part))?(l(),i("span",ts,"Ph\u1EA7n")):a("",!0),n(" "+t(o.part),1)]),_:2},1032,["class","to"]))),128))])):a("",!0)])],4),s("div",os,[ls,s("div",is,[s("div",ns,[s("p",null,[rs,n(" "+t(e.film.episodes.length)+"/"+t(e.film.length)+" t\u1EADp",1)]),s("p",null,[cs,(l(!0),i(d,null,p(e.film.genres,o=>(l(),i("span",as,t(o.name),1))),256))]),s("p",null,[ds,ms,s("span",_s,t(e.film.country.name),1)]),s("p",null,[fs,hs,s("span",ps,t(e.film.producer),1)])]),s("div",us,[s("p",null,[gs,n(" "+t(e.film.time),1)]),s("p",null,[ws,e.film.note?(l(),i("span",bs,t(e.film.note),1)):(l(),i("span",ys,"None"))]),s("p",null,[xs,(l(!0),i(d,null,p(e.film.episodes,(o,k)=>(l(),i(d,null,[k<5?(l(),b(m,{key:0,class:"d-inline-block border m-2 px-3 py-2",to:`/films/${e.slug}/${o._id}`},{default:h(()=>[n(t(o.name),1)]),_:2},1032,["to"])):a("",!0)],64))),256))])])])]),s("div",ks,[f(y,{id:e.film._id,comments:e.film.comments,onReRender:c.retrieveData},null,8,["id","comments","onReRender"])])]),f(x)])])}const Ns=T(U,[["render",vs]]);export{Ns as default};
